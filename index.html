<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AXIS</title>

<!-- PWA -->
<link rel="manifest" href="manifest.json">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="apple-mobile-web-app-title" content="AXIS">
<link rel="apple-touch-icon" href="icon512.png">

<link rel="stylesheet" href="styles.css">

<!-- Service Worker normal: só funciona em https ou GitHub Pages -->
<script>
if (location.protocol === "https:" || location.protocol === "http:") {
  if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("sw.js")
      .then(() => console.log("SW registrado"))
      .catch(err => console.log("Erro SW:", err));
  }
} else {
  console.log("PWA desativado no modo file://");
}
</script>

</head>
<body class="training">

<!-- ============================= HOME ============================= -->
<div id="home" class="panel center visible">
  <!-- STEP 1 -->
  <div id="home-step1">
    <div class="mode-title">AXIS</div>
    <div class="label">Modo de Uso</div>
    <button class="btn" onclick="setModePerformance()">Performance Mode</button>
    <button class="btn" onclick="setModeTraining()">Training Mode</button>
  </div>

  <!-- STEP 2 -->
  <div id="home-step2" style="display:none;">
    <div class="mode-title">Selecione o Modo</div>
    <button class="btn" onclick="startSwipe()">Swipe Mode</button>
    <button class="btn" onclick="startPigback()">Pigbacking</button>
    <button class="btn" onclick="startGrade()">Grade Mode</button>
    <button class="btn" onclick="startLexicon()">Lexicon</button>
    <button class="btn small" onclick="goHome(true)">Voltar</button>
  </div>
</div>

<!-- ============================= SWIPE MODE ============================= -->
<div id="swipePanel" class="panel center">
  <div class="mode-title">SWIPE MODE</div>

  <div class="swipe-step" id="swipe-step-gender">
    <div class="label">Gênero <span class="hint">(Swipe ↑/↓)</span></div>
    <div id="swipeGender" class="big">M</div>
    <div class="hint">Swipe → para ir ao número de letras</div>
  </div>

  <div class="swipe-step" id="swipe-step-length" style="display:none;">
    <div class="label">Número de Letras <span class="hint">(Swipe ↑/↓)</span></div>
    <div id="swipeLength" class="big">6</div>
    <div class="hint">Swipe ← volta | Swipe → vai para as letras</div>
  </div>

  <div class="swipe-step" id="swipe-step-letters" style="display:none;">
    <div class="label">Letras Aproximadas</div>
    <div id="swipeLetters" class="big">_ _ _</div>
    <div class="hint">
      Swipe ↑/↓ altera a letra<br>
      Swipe → próxima letra / resultados
    </div>
  </div>

  <button class="btn small" onclick="goHome(true)">Menu</button>
</div>

<!-- ============================= PIGBACKING ============================= -->
<div id="pigbackPanel" class="panel center">
  <div class="mode-title">PIGBACKING</div>

  <div class="pig-step" id="pig-step-gender">
    <div class="label">Gênero</div>
    <div id="pigGender" class="big">M</div>
  </div>

  <div class="pig-step" id="pig-step-length" style="display:none;">
    <div class="label">Número de Letras</div>
    <div id="pigLength" class="big">6</div>
  </div>

  <div class="pig-step" id="pig-step-letters" style="display:none;">
    <div class="label">Letras</div>
    <div id="pigLetters" class="big">_ _ _</div>
  </div>

  <button class="btn small" onclick="goHome(true)">Menu</button>
</div>

<!-- ============================= GRADE SETUP ============================= -->
<div id="gradeSetupPanel" class="panel center">
  <div class="mode-title">GRADE MODE</div>

  <div id="grade-step-gender" class="grade-step">
    <div class="label">Gênero</div>
    <div id="gradeGender" class="big">M</div>
  </div>

  <div id="grade-step-length" class="grade-step" style="display:none;">
    <div class="label">Número de Letras</div>
    <div id="gradeLength" class="big">6</div>
  </div>

  <button class="btn small" onclick="goHome(true)">Menu</button>
</div>

<!-- ============================= GRADE GRID ============================= -->
<div id="gradeLettersPanel" class="panel center">
  <div class="mode-title">Escolha as Letras</div>
  <div id="gradeLetterGrid" class="letter-grid"></div>

  <button class="btn" onclick="gradeDiscover()">Descobrir Nome</button>
  <button class="btn small" onclick="resetGradeLetters()">Reset</button>
  <button class="btn small" onclick="goHome(true)">Menu</button>
</div>

<!-- ============================= LEXICON ============================= -->
<div id="lexiconVCPanel" class="panel center">
  <div class="mode-title">LEXICON</div>

  <div id="lex-step1">
    <div class="label">Gênero</div>
    <button id="genderBtn" class="btn small" onclick="toggleGender()">M</button>
    <button class="btn" onclick="lexiconGoToStep2()">Continuar</button>
  </div>

  <div id="lex-step2" style="display:none;">
    <div class="label">Padrão VC</div>
    <div id="lexiconVCPreview" class="big"></div>

    <div class="label">Tamanho</div>
    <div id="lexiconLengthPreview" class="big"></div>

    <button class="btn" onclick="lexiconFinishVC()">Continuar</button>
  </div>

  <button class="btn small" onclick="goHome(true)">Menu</button>
</div>

<div id="lexiconVowelPanel" class="panel center">
  <div class="mode-title">1ª vogal na posição</div>
  <div id="vowelPosGrid" class="pos-grid"></div>
</div>

<div id="lexiconShapePanel" class="panel center">
  <div class="mode-title">Forma da letra – posição <span id="lexiconShapePos"></span></div>
  <div class="shape-row">
    <button class="btn small" onclick="lexiconAnswerShape('R')">Reta</button>
    <button class="btn small" onclick="lexiconAnswerShape('C')">Curva</button>
    <button class="btn small" onclick="lexiconAnswerShape('M')">Mista</button>
  </div>
</div>

<div id="lexiconLetterPanel" class="panel center">
  <div class="mode-title">Letra exata – posição <span id="lexiconLetterPos"></span></div>
  <div id="lexiconLetterGrid" class="letter-grid"></div>
</div>

<div id="lexiconBinaryPanel" class="panel center">
  <div class="mode-title" id="lexiconBinaryText"></div>
  <div class="shape-row">
    <button class="btn small" onclick="lexiconAnswerBinary(true)">Sim</button>
    <button class="btn small" onclick="lexiconAnswerBinary(false)">Não</button>
  </div>
</div>

<!-- ============================= RESULTADOS ============================= -->
<div id="resultPanel" class="panel center">
  <pre id="resultBox" class="result-box"></pre>
</div>

<script src="script.js"></script>

<!-- HUD -->
<div id="hud"></div>

</body>

  <!-- TELA DE LICENÇA -->
<div id="license-overlay" style="display:flex;flex-direction:column;justify-content:center;align-items:center;position:fixed;inset:0;background:black;color:white;z-index:9999;padding:20px;">
  <h2 style="margin-bottom:10px;">AXIS – Ativação</h2>
  <p style="margin-bottom:15px;text-align:center;">Digite sua licença AXIS para liberar o aplicativo.</p>

  <input id="license-input" 
         type="text" 
         placeholder="EX: ARTHUR-001"
         style="padding:10px;border-radius:8px;border:none;width:80%;max-width:300px;text-align:center;font-size:18px;margin-bottom:10px;">

  <button id="license-button"
          style="padding:10px 20px;border-radius:8px;border:none;background:#f5c453;color:black;font-size:18px;font-weight:bold;width:80%;max-width:300px;">
    Ativar
  </button>

  <p id="license-error" style="color:#ff6b6b;margin-top:15px;"></p>
</div>
  
</html>
